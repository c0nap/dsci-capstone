(env-cap) conanp@RPI-conanp:/mnt/c/dsci-cap/capstone$ make docker-python-dev
[+] Building 3.4s (20/20) FINISHED                                                               docker:default
 => [internal] load build definition from Dockerfile.python                                                0.0s
 => => transferring dockerfile: 1.29kB                                                                     0.0s
 => [internal] load metadata for docker.io/library/python:3.12-slim                                        0.2s
 => [internal] load .dockerignore                                                                          0.0s
 => => transferring context: 79B                                                                           0.0s
 => [ 1/15] FROM docker.io/library/python:3.12-slim@sha256:d86b4c74b936c438cd4cc3a9f7256b9a7c27ad68c7caf8  0.0s
 => => resolve docker.io/library/python:3.12-slim@sha256:d86b4c74b936c438cd4cc3a9f7256b9a7c27ad68c7caf8c2  0.0s
 => [internal] load build context                                                                          0.5s
 => => transferring context: 9.69MB                                                                        0.5s
 => CACHED [ 2/15] WORKDIR /pipeline                                                                       0.0s
 => CACHED [ 3/15] RUN apt-get update && apt-get install -y --no-install-recommends     build-essential m  0.0s
 => CACHED [ 4/15] COPY req/requirements.txt requirements.txt                                              0.0s
 => CACHED [ 5/15] RUN pip install --no-cache-dir -r requirements.txt                                      0.0s
 => [ 6/15] COPY src/ src/                                                                                 0.1s
 => [ 7/15] COPY tests/ tests/                                                                             0.1s
 => [ 8/15] COPY db/ db/                                                                                   0.1s
 => [ 9/15] COPY components/ components/                                                                   0.1s
 => [10/15] COPY datasets/ datasets/                                                                       0.1s
 => [11/15] COPY .env .env                                                                                 0.1s
 => [12/15] COPY Makefile .                                                                                0.1s
 => [13/15] RUN make env-docker                                                                            0.5s
 => [14/15] RUN mv .env.docker .env                                                                        0.4s
 => [15/15] COPY pyproject.toml .                                                                          0.1s
 => exporting to image                                                                                     0.3s
 => => exporting layers                                                                                    0.2s
 => => writing image sha256:9dc52400e2c4f84b1f583253b13b6192822fd90ec065f0523f374cafc5e885aa               0.0s
 => => naming to docker.io/library/dsci-cap-img-python-dev:latest                                          0.0s
container-python
70c93cf28d156973daf337e5369dfb8bac80a5e15c2d13adcc1c53b00d66a794
Network 'capstone_default' already exists; continue...
Deleted old chunks...
 * Serving Flask app 'main'
 * Debug mode: off
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5054
 * Running on http://172.17.0.5:5054
Press CTRL+C to quit
[STATUS] Story 1: preprocessing -> in-progress
127.0.0.1 - - [12/Nov/2025 21:40:32] "POST /status/story HTTP/1.1" 200 -
[STATUS] Story 1: chunking -> in-progress
127.0.0.1 - - [12/Nov/2025 21:40:32] "POST /status/story HTTP/1.1" 200 -

==================================================
Processing: ./datasets/examples/trilogy-wishes-2.epub

=== STORY SUMMARY ===
Total chunks: 254
[STATUS] Story 1: preprocessing -> completed
127.0.0.1 - - [12/Nov/2025 21:40:35] "POST /status/story HTTP/1.1" 200 -
[STATUS] Story 1: chunking -> completed
127.0.0.1 - - [12/Nov/2025 21:40:35] "POST /status/story HTTP/1.1" 200 -

Chunk details:
  index: Chunk(len=1499, book=2, chapter=16, story=1, lines=[5530,5556], story%=86.472, chapter%=20.237)

‘Look here,’ said Anthea; ‘I really have an idea. This isn’t like a common carpet. It’s very magic indeed. Don’t you think, if we put Tatcho on it, and then gave it a rest, the magic part of it might grow, like hair is supposed to do?’
‘It might,’ said Robert; ‘but I should think paraffin would do as well—at any rate as far as the smell goes, and that seems to be the great thing about Tatcho.’
But with all its faults Anthea’s idea was something to do, and they did it.
It was Cyril who fetched the Tatcho bottle from father’s washhand-stand. But the bottle had not much in it.
‘We mustn’t take it all,’ Jane said, ‘in case father’s hair began to come off suddenly. If he hadn’t anything to put on it, it might all drop off before Eliza had time to get round to the chemist’s for another bottle. It would be dreadful to have a bald father, and it would all be our fault.’
‘And wigs are very expensive, I believe,’ said Anthea. ‘Look here, leave enough in the bottle to wet father’s head all over with in case any emergency emerges—and let’s make up with paraffin. I expect it’s the smell that does the good really—and the smell’s exactly the same.’
So a small teaspoonful of the Tatcho was put on the edges of the worst darn in the carpet and rubbed carefully into the roots of the hairs of it, and all the parts that there was not enough Tatcho for had paraffin rubbed into them with a piece of flannel. Then the flannel was burned. It made a gay flame, which delighted the Phoenix and the Lamb.
    [Inserted chunk into Mongo with chunk_id: story-1_book-2_chapter-16_p.20237]

NLP output:
('Anthea', 'child', 'Anthea')
('Anthea', 'mother', 'Anthea')
('carpet', 'different from', 'common')
('magic', 'said to be the same as', 'magic')
('magic', 'said to be the same as', 'magic')
('Tatcho', 'instance of', 'magic')
('Tatcho', 'has part', 'paraffin')
('Anthea', 'notable work', 'Anthea’s idea')
('Anthea’s idea', 'author', 'Anthea')
('Cyril', 'father', 'father')
('father', 'child', 'Cyril')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'Cymbeline', 'notable work')
('William Shakespeare', 'Cymbeline', 'author')
('William Shakespeare', 'Cymbeline', 'author')
('Jane', 'father', 'father')
('father', 'child', 'Jane')
('Eliza', 'occupation', 'chemist’s')
('father', 'child', 'child')
('child', 'father', 'father')
('Wig', 'subclass of', 'wig')
('paraffin', 'use', 'make up')
('smell', 'has effect', 'good')
('good', 'has cause', 'smell')
('worst darn', 'subclass of', 'carpet')
('burned', 'product or material produced', 'flannel')
('Phoenix', 'sibling', 'Lamb')
('Lamb', 'sibling', 'Phoenix')


    LLM prompt:
You are a helpful assistant that converts semantic triples into structured JSON.
Here are some semantic triples extracted from a story chunk:
('Anthea', 'child', 'Anthea')
('Anthea', 'mother', 'Anthea')
('carpet', 'different from', 'common')
('magic', 'said to be the same as', 'magic')
('magic', 'said to be the same as', 'magic')
('Tatcho', 'instance of', 'magic')
('Tatcho', 'has part', 'paraffin')
('Anthea', 'notable work', 'Anthea’s idea')
('Anthea’s idea', 'author', 'Anthea')
('Cyril', 'father', 'father')
('father', 'child', 'Cyril')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'Cymbeline', 'notable work')
('William Shakespeare', 'Cymbeline', 'author')
('William Shakespeare', 'Cymbeline', 'author')
('Jane', 'father', 'father')
('father', 'child', 'Jane')
('Eliza', 'occupation', 'chemist’s')
('father', 'child', 'child')
('child', 'father', 'father')
('Wig', 'subclass of', 'wig')
('paraffin', 'use', 'make up')
('smell', 'has effect', 'good')
('good', 'has cause', 'smell')
('worst darn', 'subclass of', 'carpet')
('burned', 'product or material produced', 'flannel')
('Phoenix', 'sibling', 'Lamb')
('Lamb', 'sibling', 'Phoenix')

And here is the original text:
‘Look here,’ said Anthea; ‘I really have an idea. This isn’t like a common carpet. It’s very magic indeed. Don’t you think, if we put Tatcho on it, and then gave it a rest, the magic part of it might grow, like hair is supposed to do?’
‘It might,’ said Robert; ‘but I should think paraffin would do as well—at any rate as far as the smell goes, and that seems to be the great thing about Tatcho.’
But with all its faults Anthea’s idea was something to do, and they did it.
It was Cyril who fetched the Tatcho bottle from father’s washhand-stand. But the bottle had not much in it.
‘We mustn’t take it all,’ Jane said, ‘in case father’s hair began to come off suddenly. If he hadn’t anything to put on it, it might all drop off before Eliza had time to get round to the chemist’s for another bottle. It would be dreadful to have a bald father, and it would all be our fault.’
‘And wigs are very expensive, I believe,’ said Anthea. ‘Look here, leave enough in the bottle to wet father’s head all over with in case any emergency emerges—and let’s make up with paraffin. I expect it’s the smell that does the good really—and the smell’s exactly the same.’
So a small teaspoonful of the Tatcho was put on the edges of the worst darn in the carpet and rubbed carefully into the roots of the hairs of it, and all the parts that there was not enough Tatcho for had paraffin rubbed into them with a piece of flannel. Then the flannel was burned. It made a gay flame, which delighted the Phoenix and the Lamb.

Output JSON with keys: s (subject), r (relation), o (object).
Remove nonsensical triples but otherwise retain all relevant entries, and add new ones to encapsulate events, dialogue, and core meaning where applicable.

    LLM output:
[
  {"s":"carpet","r":"different from","o":"common"},
  {"s":"Tatcho","r":"applied to","o":"carpet"},
  {"s":"Cyril","r":"fetched","o":"Tatcho bottle"},
  {"s":"Tatcho bottle","r":"from","o":"father’s washhand-stand"},
  {"s":"Jane","r":"said","o":"we mustn’t take it all"},
  {"s":"Eliza","r":"went to","o":"chemist’s for another bottle"},
  {"s":"paraffin","r":"use","o":"make up"},
  {"s":"smell","r":"has effect","o":"good"},
  {"s":"good","r":"has cause","o":"smell"},
  {"s":"William Shakespeare","r":"notable work","o":"Cymbeline"},
  {"s":"William Shakespeare","r":"Cymbeline","o":"author"},
  {"s":"Eliza","r":"occupation","o":"chemist’s"},
  {"s":"carpet","r":"has part","o":"worst darn"},
  {"s":"flannel","r":"burned","o":"flame"},
  {"s":"flame","r":"delighted","o":"Phoenix and Lamb"},
  {"s":"Tatcho","r":"causes","o":"hair growth"},
  {"s":"Anthea","r":"expressed","o":"idea to treat hair with Tatcho"}
]

==================================================


Valid JSON
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: relation_extraction -> in-progress
127.0.0.1 - - [12/Nov/2025 21:44:06] "POST /status/chunk HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: llm_inference -> in-progress
127.0.0.1 - - [12/Nov/2025 21:44:06] "POST /status/chunk HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: relation_extraction -> completed
127.0.0.1 - - [12/Nov/2025 21:44:06] "POST /status/chunk HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: llm_inference -> completed
127.0.0.1 - - [12/Nov/2025 21:44:06] "POST /status/chunk HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: graph_verbalization -> in-progress
127.0.0.1 - - [12/Nov/2025 21:44:06] "POST /status/chunk HTTP/1.1" 200 -
carpet different from common
Tatcho applied to carpet
Cyril fetched Tatcho bottle
Tatcho bottle from father’s washhand-stand
Jane said we mustn’t take it all
Eliza went to chemist’s for another bottle
paraffin use make up
smell has effect good
good has cause smell
William Shakespeare notable work Cymbeline
William Shakespeare Cymbeline author
Eliza occupation chemist’s
carpet has part worst darn
flannel burned flame
flame delighted Phoenix and Lamb
Tatcho causes hair growth
Anthea expressed idea to treat hair with Tatcho

Most relevant nodes:
  node_name  edge_count
0    carpet           3
1     smell           2
2    Tatcho           2

Triples which best represent the graph:
carpet HAS_PART worst darn
carpet DIFFERENT_FROM common
smell HAS_EFFECT good
Tatcho CAUSES hair growth
Tatcho APPLIED_TO carpet

[STATUS] Chunk story-1_book-2_chapter-16_p.20237: graph_verbalization -> completed
127.0.0.1 - - [12/Nov/2025 21:44:08] "POST /status/chunk HTTP/1.1" 200 -
[STATUS] Story 1: summarization -> in-progress
127.0.0.1 - - [12/Nov/2025 21:44:08] "POST /status/story HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: summarization -> in-progress
127.0.0.1 - - [12/Nov/2025 21:44:08] "POST /status/chunk HTTP/1.1" 200 -

Generated summary:
The carpet has a part described as 'worst darn' and is different from the common type. The smell has a good effect. Tatcho causes hair growth and is applied to the carpet.
    [Wrote summary to Mongo with chunk_id: story-1_book-2_chapter-16_p.20237]
[STATUS] Story 1: summarization -> completed
127.0.0.1 - - [12/Nov/2025 21:44:19] "POST /status/story HTTP/1.1" 200 -
[STATUS] Chunk story-1_book-2_chapter-16_p.20237: summarization -> completed
127.0.0.1 - - [12/Nov/2025 21:44:19] "POST /status/chunk HTTP/1.1" 200 -
[ASSIGNED] chunk 'story-1_book-2_chapter-16_p.20237' to worker questeval: using database 'conan_capstone' and collection 'story_chunks'
127.0.0.1 - - [12/Nov/2025 21:44:19] "POST /process_story HTTP/1.1" 200 -
[CALLBACK] chunk_id=story-1_book-2_chapter-16_p.20237, task=questeval, status=startedTriggered questeval: {'assigned': 1, 'status': 'tasks_assigned', 'story_id': 1, 'task_type': 'questeval', 'total_chunks': 1}

172.18.0.6 - - [12/Nov/2025 21:44:19] "POST /callback HTTP/1.1" 200 -
[ASSIGNED] chunk 'story-1_book-2_chapter-16_p.20237' to worker bookscore: using database 'conan_capstone' and collection 'story_chunks'
127.0.0.1 - - [12/Nov/2025 21:44:19] "POST /process_story HTTP/1.1" 200 -
Triggered bookscore: {'assigned': 1, 'status': 'tasks_assigned', 'story_id': 1, 'task_type': 'bookscore', 'total_chunks': 1}
Initial processing complete. Server listening for additional requests from Blazor...
Press Ctrl+C to stop.
[CALLBACK] chunk_id=story-1_book-2_chapter-16_p.20237, task=bookscore, status=started
172.18.0.7 - - [12/Nov/2025 21:44:19] "POST /callback HTTP/1.1" 200 -
[CALLBACK] chunk_id=story-1_book-2_chapter-16_p.20237, task=bookscore, status=completed
[STORY COMPLETE] All chunks completed metric_bookscore for story 1
172.18.0.7 - - [12/Nov/2025 21:44:28] "POST /callback HTTP/1.1" 200 -
[CALLBACK] chunk_id=story-1_book-2_chapter-16_p.20237, task=questeval, status=completed
[STORY COMPLETE] All chunks completed metric_questeval for story 1
Downloading builder script: 6.27kB [00:00, 4.25MB/s]
Downloading builder script: 7.95kB [00:00, 18.3MB/s]
Some weights of RobertaModel were not initialized from the model checkpoint at roberta-large and are newly initialized: ['pooler.dense.bias', 'pooler.dense.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
Sending payload to Blazor at http://blazor_service:5055/api/metrics
POST succeeded
{'bookID': '2', 'bookTitle': 'The Phoenix and the Carpet', 'summaryText': "The carpet has a part described as 'worst darn' and is different from the common type. The smell has a good effect. Tatcho causes hair growth and is applied to the carpet.", 'goldSummaryText': '‘Look here,’ said Anthea; ‘I really have an idea. This isn’t like a common carpet. It’s very magic indeed. Don’t you think, if we put Tatcho on it, and then gave it a rest, the magic part of it might grow, like hair is supposed to do?’\n‘It might,’ said Robert; ‘but I should think paraffin would do as well—at any rate as far as the smell goes, and that seems to be the great thing about Tatcho.’\nBut with all its faults Anthea’s idea was something to do, and they did it.\nIt was Cyril who fetched the Tatcho bottle from father’s washhand-stand. But the bottle had not much in it.\n‘We mustn’t take it all,’ Jane said, ‘in case father’s hair began to come off suddenly. If he hadn’t anything to put on it, it might all drop off before Eliza had time ', 'metrics': {'prF1Metrics': [{'name': 'BERTScore', 'precision': 0.8633345365524292, 'recall': 0.7987340688705444, 'f1Score': 0.8297789096832275}], 'qa': {'qaItems': [{'question': 'UNKNOWN', 'goldAnswer': 'UNKNOWN', 'generatedAnswer': 'UNKNOWN', 'isCorrect': False, 'accuracy': 0}, {'question': 'UNKNOWN', 'goldAnswer': 'UNKNOWN', 'generatedAnswer': 'UNKNOWN', 'isCorrect': False, 'accuracy': 0}], 'averageAccuracy': 0}, 'scalarMetrics': [{'name': 'BooookScore (Chang 2024)', 'value': 0}, {'name': 'QuestEval (Scialom 2021)', 'value': 0.3423340832052486}, {'name': 'ROUGE-1', 'value': 0.19251336898395724}, {'name': 'ROUGE-2', 'value': 0.01081081081081081}, {'name': 'ROUGE-L', 'value': 0.10695187165775401}, {'name': 'ROUGE-Lsum', 'value': 0.1497326203208556}]}, 'qaResults': []}

Output sent to web app.
[PIPELINE FINALIZED] Story 1 fully processed
172.18.0.6 - - [12/Nov/2025 21:48:35] "POST /callback HTTP/1.1" 200 -
INFO:werkzeug:172.18.0.6 - - [12/Nov/2025 21:48:35] "POST /callback HTTP/1.1" 200 -
^Cmake[2]: *** [Makefile:77: docker-start] Interrupt
make[1]: *** [Makefile:89: docker-python] Interrupt
make: *** [Makefile:124: docker-python-dev] Interrupt

(env-cap) conanp@RPI-conanp:/mnt/c/dsci-cap/capstone$ docker logs container-bscore
 * Serving Flask app 'flask'
 * Debug mode: off
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5002
 * Running on http://172.17.0.4:5002
Press CTRL+C to quit
[QUEUED] chunk 'story-1_book-2_chapter-16_p.20237' from Boss: using database 'conan_capstone' and collection 'story_chunks'
172.18.0.8 - - [12/Nov/2025 21:44:19] "POST /tasks/queue HTTP/1.1" 202 -
FINISHED: chunk ID: story-1_book-2_chapter-16_p.20237, result:
{'value': 0.0, 'annotations': {"The carpet has a part described as 'worst darn' and is different from the common type.": {'questions': "What does 'worst darn' refer to? How is the carpet different from the common type? What is the significance of this detail?", 'types': ['entity omission', 'causal omission']}, 'The smell has a good effect.': {'questions': 'What is the source of the smell? How does it have a good effect? What is the context of the smell in relation to the carpet?', 'types': ['entity omission', 'causal omission']}, 'Tatcho causes hair growth and is applied to the carpet.': {'questions': 'What is Tatcho? How does applying it to the carpet relate to hair growth? Why is it being applied to the carpet in the first place?', 'types': ['entity omission', 'causal omission']}}, 'model_used': 'openai-model_gpt-4o-mini'}
(env-cap) conanp@RPI-conanp:/mnt/c/dsci-cap/capstone$ docker logs container-qeval
Downloading: 6.81kB [00:00, 10.2MB/s]
WARNING:root:Downloading language model for the spaCy model.
DEPRECATION: https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0-py3-none-any.whl#egg=en_core_web_sm==3.0.0 contains an egg fragment with a non-PEP 508 name. pip 25.1 will enforce this behaviour change. A possible replacement is to use the req @ url syntax, and remove the egg fragment. Discussion can be found at https://github.com/pypa/pip/issues/13157
Collecting en-core-web-sm==3.0.0
  Downloading https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0-py3-none-any.whl (13.7 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.7/13.7 MB 28.7 MB/s eta 0:00:00
Requirement already satisfied: spacy<3.1.0,>=3.0.0 in /usr/local/lib/python3.8/site-packages (from en-core-web-sm==3.0.0) (3.0.6)
Requirement already satisfied: spacy-legacy<3.1.0,>=3.0.4 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (3.0.12)
Requirement already satisfied: murmurhash<1.1.0,>=0.28.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (1.0.13)
Requirement already satisfied: cymem<2.1.0,>=2.0.2 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.0.11)
Requirement already satisfied: preshed<3.1.0,>=3.0.2 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (3.0.10)
Requirement already satisfied: thinc<8.1.0,>=8.0.3 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (8.0.17)
Requirement already satisfied: blis<0.8.0,>=0.4.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (0.7.11)
Requirement already satisfied: wasabi<1.1.0,>=0.8.1 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (0.10.1)
Requirement already satisfied: srsly<3.0.0,>=2.4.1 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.4.8)
Requirement already satisfied: catalogue<2.1.0,>=2.0.3 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.0.10)
Requirement already satisfied: typer<0.4.0,>=0.3.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (0.3.2)
Requirement already satisfied: pathy>=0.3.5 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (0.11.0)
Requirement already satisfied: tqdm<5.0.0,>=4.38.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (4.49.0)
Requirement already satisfied: numpy>=1.15.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (1.24.4)
Requirement already satisfied: requests<3.0.0,>=2.13.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.32.4)
Requirement already satisfied: pydantic<1.8.0,>=1.7.1 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (1.7.4)
Requirement already satisfied: jinja2 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.11.3)
Requirement already satisfied: setuptools in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (75.3.2)
Requirement already satisfied: packaging>=20.0 in /usr/local/lib/python3.8/site-packages (from spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (25.0)
Requirement already satisfied: smart-open<7.0.0,>=5.2.1 in /usr/local/lib/python3.8/site-packages (from pathy>=0.3.5->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (6.4.0)
Requirement already satisfied: pathlib-abc==0.1.1 in /usr/local/lib/python3.8/site-packages (from pathy>=0.3.5->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (0.1.1)
Requirement already satisfied: charset_normalizer<4,>=2 in /usr/local/lib/python3.8/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (3.4.4)
Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.8/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (3.11)
Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.8/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2.2.3)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/site-packages (from requests<3.0.0,>=2.13.0->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (2025.10.5)
Requirement already satisfied: click<7.2.0,>=7.1.1 in /usr/local/lib/python3.8/site-packages (from typer<0.4.0,>=0.3.0->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (7.1.2)
Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.8/site-packages (from jinja2->spacy<3.1.0,>=3.0.0->en-core-web-sm==3.0.0) (1.1.1)
Installing collected packages: en-core-web-sm
Successfully installed en-core-web-sm-3.0.0
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
✔ Download and installation successful
You can now load the package via spacy.load('en_core_web_sm')







 * Serving Flask app "flask" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: off
INFO:werkzeug: * Running on http://0.0.0.0:5001/ (Press CTRL+C to quit)
[QUEUED] chunk 'story-1_book-2_chapter-16_p.20237' from Boss: using database 'conan_capstone' and collection 'story_chunks'
INFO:werkzeug:172.18.0.8 - - [12/Nov/2025 21:44:19] "POST /tasks/queue HTTP/1.1" 202 -
Some weights of the model checkpoint at /root/.cache/huggingface/transformers/bert-base-multilingual-cased were not used when initializing BertModel: ['cls.seq_relationship.weight', 'cls.predictions.transform.dense.weight', 'cls.seq_relationship.bias', 'cls.predictions.decoder.weight', 'cls.predictions.transform.LayerNorm.bias', 'cls.predictions.transform.LayerNorm.weight', 'cls.predictions.transform.dense.bias', 'cls.predictions.bias']
- This IS expected if you are initializing BertModel from the checkpoint of a model trained on another task or with another architecture (e.g. initializing a BertForSequenceClassification model from a BertForPreTraining model).
- This IS NOT expected if you are initializing BertModel from the checkpoint of a model that you expect to be exactly identical (initializing a BertForSequenceClassification model from a BertForSequenceClassification model).
FINISHED: chunk ID: story-1_book-2_chapter-16_p.20237, result:
{'value': 0.3423340832052486, 'has_reference': False}
Failed to notify boss: HTTPConnectionPool(host='python_service', port=5054): Read timed out. (read timeout=5)