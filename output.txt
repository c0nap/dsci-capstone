(env-cap) conanp@RPI-conanp:/mnt/c/dsci-cap/capstone$ make docker-python
container-python
63a9ae848cdd7b66ed2299378423b61dfc0bf67639525d631b10fdf5dc598e4f
Network 'capstone_default' already exists; continue...

==================================================
Processing: ./datasets/examples/trilogy-wishes-2.epub

=== STORY SUMMARY ===
Total chunks: 254

Chunk details:
  index: Chunk(len=1441, book=2, chapter=14, story=1, lines=[4744,4772], story%=74.504, chapter%=60.033)

It was an awful moment. Would the boots and the voice come in. Yes! No! The voice said—
‘Well, stow it, will you?’
And the boots went heavily away, along the passage and up some sounding stone stairs.
‘Now then,’ whispered Anthea.
‘How the blue Moses did you get in?’ asked the burglar, in a hoarse whisper of amazement.
‘On the carpet,’ said Jane, truly.
‘Stow that,’ said the burglar. ‘One on you I could ‘a’ swallowed, but four—AND a yellow fowl.’
‘Look here,’ said Cyril, sternly, ‘you wouldn’t have believed any one if they’d told you beforehand about your finding a cow and all those cats in our nursery.’
‘That I wouldn’t,’ said the burglar, with whispered fervour, ‘so help me Bob, I wouldn’t.’
‘Well, then,’ Cyril went on, ignoring this appeal to his brother, ‘just try to believe what we tell you and act accordingly. It can’t do you any HARM, you know,’ he went on in hoarse whispered earnestness. ‘You can’t be very much worse off than you are now, you know. But if you’ll just trust to us we’ll get you out of this right enough. No one saw us come in. The question is, where would you like to go?’
‘I’d like to go to Boolong,’ was the instant reply of the burglar. ‘I’ve always wanted to go on that there trip, but I’ve never ‘ad the ready at the right time of the year.’
‘Boolong is a town like London,’ said Cyril, well meaning, but inaccurate, ‘how could you get a living there?’
The burglar scratched his head in deep doubt.

NLP output:
('2008 Summer Olympics', 'point in time', '2008')
('boots', 'different from', 'voice')
('voice', 'different from', 'boots')
('Yes', 'instance of', 'Yes!')
('No', 'instance of', 'No!')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'author', 'William Shakespeare')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'Cymbeline', 'notable work')
('William Shakespeare', 'Cymbeline', 'author')
('William Shakespeare', 'Cymbeline', 'author')
('Now then,’ whispered Anthea', 'characters', 'Anthea')
('Anthea', 'present in work', 'Now then,’ whispered Anthea')
('How the blue Moses did you get in?', 'characters', 'Moses')
('Moses', 'present in work', 'How the blue Moses did you get in?')
('John Milton', 'notable work', 'Paradise Lost')
('Paradise Lost', 'author', 'John Milton')
('On the carpet', 'cast member', 'Jane')
('Stow that', 'participant', 'burglar')
('John Milton', 'notable work', 'Paradise Lost')
('Paradise Lost', 'Paradise Lost', 'notable work')
('John Milton', 'Milton', 'author')
('author', 'Paradise Lost', 'Milton')
('notable work', 'notable work', 'Paradise Lost')
('Paradise Lost', 'author', 'John Milton')
('Milton', 'Milton', 'author')
('Paradise Lost', 'Paradise Lost', 'notable work')
('Cyril', 'owner of', 'nursery')
('nursery', 'owned by', 'Cyril')
('John F. Kennedy', 'significant event', 'assassinated')
('assassinated', 'facet of', 'John F. Kennedy')
('Cyril', 'sibling', 'his brother')
('his brother', 'sibling', 'Cyril')
('HARM', 'has effect', 'fever')
('George Orwell', 'notable work', 'Nineteen Eighty-Four')
('Nineteen Eighty-Four', 'author', 'Orwell')
('John F. Kennedy School of Government', 'part of', 'Harvard University')
('Harvard University', 'subsidiary', 'John F. Kennedy School of Government')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'author', 'William Shakespeare')
('John F. Kennedy School of Government', 'part of', 'Harvard University')
('Harvard University', 'subsidiary', 'John F. Kennedy School of Government')
('Boolong', 'located in the administrative territorial entity', 'Boolong')
('World Rugby League', 'sport', 'Rugby League')
('Rugby League', 'organizer', 'World Rugby League')
('Boolong', 'located in the administrative territorial entity', 'London')
('George Orwell', 'notable work', 'Nineteen Eighty-Four')
('Nineteen Eighty-Four', 'author', 'Orwell')


    LLM prompt:
You are a helpful assistant that converts semantic triples into structured JSON.
Here are some semantic triples extracted from a story chunk:
('2008 Summer Olympics', 'point in time', '2008')
('boots', 'different from', 'voice')
('voice', 'different from', 'boots')
('Yes', 'instance of', 'Yes!')
('No', 'instance of', 'No!')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'author', 'William Shakespeare')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'Cymbeline', 'notable work')
('William Shakespeare', 'Cymbeline', 'author')
('William Shakespeare', 'Cymbeline', 'author')
('Now then,’ whispered Anthea', 'characters', 'Anthea')
('Anthea', 'present in work', 'Now then,’ whispered Anthea')
('How the blue Moses did you get in?', 'characters', 'Moses')
('Moses', 'present in work', 'How the blue Moses did you get in?')
('John Milton', 'notable work', 'Paradise Lost')
('Paradise Lost', 'author', 'John Milton')
('On the carpet', 'cast member', 'Jane')
('Stow that', 'participant', 'burglar')
('John Milton', 'notable work', 'Paradise Lost')
('Paradise Lost', 'Paradise Lost', 'notable work')
('John Milton', 'Milton', 'author')
('author', 'Paradise Lost', 'Milton')
('notable work', 'notable work', 'Paradise Lost')
('Paradise Lost', 'author', 'John Milton')
('Milton', 'Milton', 'author')
('Paradise Lost', 'Paradise Lost', 'notable work')
('Cyril', 'owner of', 'nursery')
('nursery', 'owned by', 'Cyril')
('John F. Kennedy', 'significant event', 'assassinated')
('assassinated', 'facet of', 'John F. Kennedy')
('Cyril', 'sibling', 'his brother')
('his brother', 'sibling', 'Cyril')
('HARM', 'has effect', 'fever')
('George Orwell', 'notable work', 'Nineteen Eighty-Four')
('Nineteen Eighty-Four', 'author', 'Orwell')
('John F. Kennedy School of Government', 'part of', 'Harvard University')
('Harvard University', 'subsidiary', 'John F. Kennedy School of Government')
('William Shakespeare', 'notable work', 'Cymbeline')
('Cymbeline', 'author', 'William Shakespeare')
('John F. Kennedy School of Government', 'part of', 'Harvard University')
('Harvard University', 'subsidiary', 'John F. Kennedy School of Government')
('Boolong', 'located in the administrative territorial entity', 'Boolong')
('World Rugby League', 'sport', 'Rugby League')
('Rugby League', 'organizer', 'World Rugby League')
('Boolong', 'located in the administrative territorial entity', 'London')
('George Orwell', 'notable work', 'Nineteen Eighty-Four')
('Nineteen Eighty-Four', 'author', 'Orwell')

And here is the original text:
It was an awful moment. Would the boots and the voice come in. Yes! No! The voice said—
‘Well, stow it, will you?’
And the boots went heavily away, along the passage and up some sounding stone stairs.
‘Now then,’ whispered Anthea.
‘How the blue Moses did you get in?’ asked the burglar, in a hoarse whisper of amazement.
‘On the carpet,’ said Jane, truly.
‘Stow that,’ said the burglar. ‘One on you I could ‘a’ swallowed, but four—AND a yellow fowl.’
‘Look here,’ said Cyril, sternly, ‘you wouldn’t have believed any one if they’d told you beforehand about your finding a cow and all those cats in our nursery.’
‘That I wouldn’t,’ said the burglar, with whispered fervour, ‘so help me Bob, I wouldn’t.’
‘Well, then,’ Cyril went on, ignoring this appeal to his brother, ‘just try to believe what we tell you and act accordingly. It can’t do you any HARM, you know,’ he went on in hoarse whispered earnestness. ‘You can’t be very much worse off than you are now, you know. But if you’ll just trust to us we’ll get you out of this right enough. No one saw us come in. The question is, where would you like to go?’
‘I’d like to go to Boolong,’ was the instant reply of the burglar. ‘I’ve always wanted to go on that there trip, but I’ve never ‘ad the ready at the right time of the year.’
‘Boolong is a town like London,’ said Cyril, well meaning, but inaccurate, ‘how could you get a living there?’
The burglar scratched his head in deep doubt.

Output JSON with keys: s (subject), r (relation), o (object).
Remove nonsensical triples but otherwise retain all relevant entries, and add new ones to encapsulate events, dialogue, and core meaning where applicable.

    LLM output:
[
  {"s": "2008 Summer Olympics", "r": "point in time", "o": "2008"},
  {"s": "boots", "r": "different from", "o": "voice"},
  {"s": "voice", "r": "different from", "o": "boots"},
  {"s": "Yes", "r": "instance of", "o": "Yes!"},
  {"s": "No", "r": "instance of", "o": "No!"},
  {"s": "William Shakespeare", "r": "notable work", "o": "Cymbeline"},
  {"s": "Cymbeline", "r": "author", "o": "William Shakespeare"},
  {"s": "Now then,” whispered Anthea", "r": "characters", "o": "Anthea"},
  {"s": "Anthea", "r": "present in work", "o": "Now then,” whispered Anthea"},
  {"s": "How the blue Moses did you get in?", "r": "characters", "o": "Moses"},
  {"s": "Moses", "r": "present in work", "o": "How the blue Moses did you get in?"},
  {"s": "John Milton", "r": "notable work", "o": "Paradise Lost"},
  {"s": "Paradise Lost", "r": "author", "o": "John Milton"},
  {"s": "On the carpet", "r": "cast member", "o": "Jane"},
  {"s": "Cyril", "r": "owner of", "o": "nursery"},
  {"s": "nursery", "r": "owned by", "o": "Cyril"},
  {"s": "John F. Kennedy", "r": "significant event", "o": "assassinated"},
  {"s": "John F. Kennedy School of Government", "r": "part of", "o": "Harvard University"},
  {"s": "Harvard University", "r": "subsidiary", "o": "John F. Kennedy School of Government"},
  {"s": "George Orwell", "r": "notable work", "o": "Nineteen Eighty-Four"},
  {"s": "Nineteen Eighty-Four", "r": "author", "o": "Orwell"},
  {"s": "World Rugby League", "r": "sport", "o": "Rugby League"},
  {"s": "Rugby League", "r": "organizer", "o": "World Rugby League"},
  {"s": "Boolong", "r": "located in the administrative territorial entity", "o": "London"},
  {"s": "nursery", "r": "contains", "o": "cow and cats"},
  {"s": "cow", "r": "found in", "o": "nursery"},
  {"s": "cats", "r": "found in", "o": "nursery"},
  {"s": "burglar", "r": "desires", "o": "Boolong"},
  {"s": "burglar", "r": "asks", "o": "How the blue Moses did you get in?"},
  {"s": "Jane", "r": "present in", "o": "On the carpet"},
  {"s": "the voice", "r": "dialogue", "o": "Well, stow it, will you?"},
  {"s": "burglar", "r": "feels", "o": "doubt"}
]

==================================================


Valid JSON
2008 Summer Olympics point in time 2008
boots different from voice
voice different from boots
Yes instance of Yes!
No instance of No!
William Shakespeare notable work Cymbeline
Cymbeline author William Shakespeare
Now then,” whispered Anthea characters Anthea
Anthea present in work Now then,” whispered Anthea
How the blue Moses did you get in? characters Moses
Moses present in work How the blue Moses did you get in?
John Milton notable work Paradise Lost
Paradise Lost author John Milton
On the carpet cast member Jane
Cyril owner of nursery
nursery owned by Cyril
John F. Kennedy significant event assassinated
John F. Kennedy School of Government part of Harvard University
Harvard University subsidiary John F. Kennedy School of Government
George Orwell notable work Nineteen Eighty-Four
Nineteen Eighty-Four author Orwell
World Rugby League sport Rugby League
Rugby League organizer World Rugby League
Boolong located in the administrative territorial entity London
nursery contains cow and cats
cow found in nursery
cats found in nursery
burglar desires Boolong
burglar asks How the blue Moses did you get in?
Jane present in On the carpet
the voice dialogue Well, stow it, will you?
burglar feels doubt

Most relevant nodes:
                            node_name  edge_count
0                             nursery           5
1                             burglar           3
2  How_the_blue_Moses_did_you_get_in_           3

Triples which best represent the graph:
nursery contains cow_and_cats
nursery owned_by Cyril
burglar feels doubt
burglar asks How_the_blue_Moses_did_you_get_in_
burglar desires Boolong
How_the_blue_Moses_did_you_get_in_ characters Moses


Generated summary:
Cyril owns a nursery that contains a cow and cats. A burglar, feeling doubt, asks how the blue Moses got in and expresses a desire for Boolong. Moses is a character referenced in the inquiry.
Sending payload to Blazor at http://blazor_service:5055/api/metrics
POST succeeded
{'bookID': '2', 'bookTitle': 'The Phoenix and the Carpet', 'summaryText': 'Cyril owns a nursery that contains a cow and cats. A burglar, feeling doubt, asks how the blue Moses got in and expresses a desire for Boolong. Moses is a character referenced in the inquiry.', 'metrics': {'prF1Metrics': [{'name': 'ROUGE', 'precision': 0, 'recall': 0, 'f1Score': 0}, {'name': 'BERTScore', 'precision': 0, 'recall': 0, 'f1Score': 0}], 'qa': {'qaItems': [{'question': 'UNKNOWN', 'goldAnswer': 'UNKNOWN', 'generatedAnswer': 'UNKNOWN', 'isCorrect': False, 'accuracy': 0}, {'question': 'UNKNOWN', 'goldAnswer': 'UNKNOWN', 'generatedAnswer': 'UNKNOWN', 'isCorrect': False, 'accuracy': 0}], 'averageAccuracy': 0}, 'scalarMetrics': [{'name': 'BooookScore (Chang 2024)', 'value': 0}, {'name': 'QuestEval (Scialom 2021)', 'value': 0}]}, 'qaResults': []}

Output sent to web app.
# exit